{"version":3,"sources":["index.js"],"names":["blocks","document","querySelectorAll","blocksContainer","querySelector","viewContainer","coef","window","onload","init","i","length","style","backgroundColor","innerHTML","id","onmousedown","e","moving","block","position","zIndex","eventsNone","onmousemove","moveTo","onmouseup","inject","building","left","event","pageX","offsetWidth","top","pageY","offsetHeight","checkPosition","append","target","tmp","pointerEvents","closest","findClosest","parentNode","neighbors","x","getBoundingClientRect","y","neighborY","neighborX","neighborWidth","neighborHeight"],"mappings":"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","file":"blocks.e31bb0bc.js","sourceRoot":"..","sourcesContent":["var blocks = document.querySelectorAll('.blocks-item');\r\nvar blocksContainer = document.querySelector('.blocks');\r\nvar viewContainer = document.querySelector('.view');\r\nvar coef = 25;\r\n\r\nwindow.onload = init;\r\n// инициализация\r\nfunction init() {\r\n    for (var i = 0; blocks.length > i; i++) {\r\n        blocks[i].style.backgroundColor = blocks[i].innerHTML;\r\n        blocks[i].id = \"block_\" + i;\r\n        blocks[i].onmousedown = function (e) {\r\n            moving(this)\r\n        }\r\n    }\r\n}\r\n\r\nfunction moving(block) {\r\n    block.style.position = \"fixed\";\r\n    block.style.zIndex = \"1\";\r\n    eventsNone(\"none\");\r\n    // событие начала\r\n    document.onmousemove = function (e) {\r\n        moveTo(block);\r\n    }\r\n    // событие окончания\r\n    document.onmouseup = function () {\r\n        eventsNone(\"\");\r\n        inject(block);\r\n        building(block);\r\n        document.onmousemove = null;\r\n        block.onmouseup = null;\r\n    }\r\n}\r\n// перемещение за курсором\r\nfunction moveTo(block) {\r\n    block.style.left = event.pageX - block.offsetWidth / 2 + 'px';\r\n    block.style.top = event.pageY - block.offsetHeight / 2 + 'px';\r\n}\r\n// перемещаем в нужный блок\r\nfunction inject(block) {\r\n    checkPosition().append(block)\r\n    if (checkPosition() == blocksContainer) {\r\n        block.style.position = \"\";\r\n        block.style.top = \"\";\r\n        block.style.left = \"\";\r\n        block.style.zIndex = \"\";\r\n    }\r\n}\r\n// проверяем в какой блок попадает\r\nfunction checkPosition() {\r\n    if (event.target == blocksContainer) {\r\n        return blocksContainer;\r\n    }\r\n    if (event.target == viewContainer) {\r\n        return viewContainer;\r\n    }\r\n}\r\n// функция обнуления всех ивентов\r\nfunction eventsNone(tmp) {\r\n    for (var i = 0; blocks.length > i; i++) {\r\n        blocks[i].style.pointerEvents = tmp;\r\n    }\r\n}\r\n\r\nfunction building(block) {\r\n    var closest = findClosest(block);\r\n\r\n}\r\n\r\nfunction findClosest(block) {\r\n    if (block.parentNode == viewContainer) {\r\n        var neighbors = block.parentNode.querySelectorAll(\".blocks-item\"),\r\n            x = block.getBoundingClientRect().left,\r\n            y = block.getBoundingClientRect().top;\r\n\r\n        for (var i = 0; i < neighbors.length; i++) {\r\n            if (neighbors[i] != block) {\r\n\r\n                var neighborY = neighbors[i].getBoundingClientRect().top,\r\n                    neighborX = neighbors[i].getBoundingClientRect().left,\r\n                    neighborWidth = neighborX + neighbors[i].offsetWidth,\r\n                    neighborHeight = neighborY + neighbors[i].offsetHeight;\r\n\r\n                if (y + block.offsetHeight > neighborY - coef && neighborHeight + coef > y && x + block.offsetWidth > neighborX - coef && neighborWidth + coef > x) {\r\n                    return (neighbors[i])\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}"]}